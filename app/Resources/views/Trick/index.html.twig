{% extends "base.html.twig" %}

{% block title %}
    Home - {{ parent() }}
{% endblock %}

{% block body %}

    <div class="container">
        <h2>Liste de figures de SnowBoard</h2>
        <hr>
        <div class="col-xs-10 col-xs-offset-1">

            {% if tricks is empty %}
                <i style="font-size:1.8em">Aucune figure disponible</i>
            {% endif %}

            {% for trick in tricks %}
                <div class="media row">
                    {%  if (trick.images|first) is not empty %}
                    <div class="col-md-2">
                        <img src="{{ asset(trick_directory~(trick.images|first).id~'.'~(trick.images|first).ext) }}"
                             class="media-object"
                             alt="{{ (trick.images|first).alt }}">
                    </div>
                    {% endif %}
                    <div class="col-md-9">
                        <h4 class="media-heading">
                            <a href="{{ path('trick_view', {'id': trick.id}) }}" >{{ trick.nom }}</a>
                            <small>
                                <i>
                                    Publi√© le {{ trick.date| localizeddate('none', 'none', null, null, 'd MMMM Y') }}
                                </i>
                            </small>
                            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                                <a href="{{ path('trick_edit', {'id': trick.id}) }}">
                                    <span class="fa fa-pencil"></span>
                                </a>

                                {% if is_granted('ROLE_ADMIN') %}
                                    <a class="delete" title="Supprimer la figure?" data-href="{{ path('trick_delete', {'id': trick.id}) }}">
                                        <span class="fa fa-remove"></span>
                                    </a>
                                {% endif %}
                            {% endif %}
                        </h4>
                        <p>{{ trick.description|truncate(150) }}
                            <a href="{{ path('trick_view', {'id': trick.id}) }}" >[lire la suite...]
                            </a>
                        </p>
                    </div>
                </div>
            {% endfor %}
        </div>

        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
            <div class="col-xs-10 col-xs-offset-1">
                <hr>
                <a href="{{ path('trick_add') }}" class="btn btn-default pull-right">
                    Ajouter une figure
                </a>
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="{{ asset('assets/js/editTrick.js') }}"></script>

{% endblock %}