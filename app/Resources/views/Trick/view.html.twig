{% extends "default_trick.html.twig" %}

{% block title %}
    View - {{ parent() }}
{% endblock %}

{% block body %}

    <div class="container">
        <header class="intro-header"
                style="background-image: url({{ asset(trick_directory~(trick.images|first).id~'.'~(trick.images|first).ext) }})">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="site-heading">
                            <h1>{{ trick.nom }}</h1>
                            <hr class="small">
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <hr>
        <section id="description" class="container-fluid">
            <div class="col-lg-12">
                <p>{{ trick.description|nl2br }}</p>
            </div>
        </section>
        <hr>
        <section id="images" class="container-fluid">
            <div class="col-lg-12">
                {% for image in trick.images|slice(1) %}
                    <div class="col-lg-3 media-image">
                        <img class="img-trick" src="{{ asset(trick_directory~image.id~'.'~image.ext) }}"
                             alt="{{ asset(trick_directory~image.id~'.'~image.alt) }}">
                        <div class="fa-button">
                        </div>
                    </div>
                {% endfor %}

                {% for video in trick.videos %}
                    <div class="col-lg-3">
                        <iframe class="media-video"
                                src="{{ video.url }}"
                                frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
                        </iframe>
                    </div>
                {% endfor %}
            </div>
        </section>
        <hr>
        {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
            <section id="commenter" class="container-fluid">
                <h3>Laisser un commentaire</h3>
                {{ form(form) }}
            </section>
            <hr>
        {% endif %}
        <section id="commentaires" class="container-fluid">
            {{ render(controller("AppBundle:Trick:comments",{'trick': trick})) }}
        </section>
    </div>
    <div class="text-center">
        <button class="btn btn-default"
                data-href="{{ path('app_trick_comments',{'id':trick.id}) }}"
                id="btn-comments">Plus
        </button>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="{{ asset('assets/js/viewTrick.js') }}"></script>

{% endblock %}