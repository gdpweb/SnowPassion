#app/config/security.yml
security:
  encoders:

    AppBundle\Entity\User: bcrypt

  providers:
    database_users:
      entity: { class: AppBundle:User, property: username }

  firewalls:
    dev:
      pattern: ^/(_(profiler|wdt|error)|css|images|js)/
      security: false

    main:

      pattern: ^/

      user_checker: AppBundle\Security\UserChecker

      logout_on_user_change: false

      anonymous: true

      form_login:

        check_path: login_check

        login_path: login

        default_target_path: homepage

        always_use_default_target_path: true

      logout:
        path: logout
        target: homepage

  access_control:
  - { path: ^/, roles: IS_AUTHENTICATED_ANONYMOUSLY }

  - { path: ^/, roles: ROLE_DEFAULT }
  - { path: ^/editor, roles: ROLE_AUTEUR}